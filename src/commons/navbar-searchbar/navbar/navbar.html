<template>
  <require from="../../shuffle/shuffle"></require>
  <require from="../../workspaces-menu/workspace-menu"></require>

  <nav
    class="navbar navbar-expand-lg navbar-light bg-light border-bottom sticky-top"
  >
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item dropdown">
          <a
            class="navbar-brand"
            href="javascript:void(0);"
            id="navbarDropdown"
            role="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <font-awesome-icon icon.bind="gridIcon" size="lg"></font-awesome-icon>
          </a>
          <div
            class="dropdown-menu workspace-dropdown-menu"
            aria-labelledby="navbarDropdown"
          >
            <shuffle
              products.bind="applications"
              select-product.call="setCurrentProduct(product)"
            ></shuffle>
          </div>
        </li>

        <li class="nav-item">
          <span class="navbar-brand mb-0 h1">${title}</span>
        </li>

        <!-- Navbar elements -->
        <li repeat.for="item of menuItems" class="nav-item">
          <a
            if.bind="item.nav === true"
            class="nav-link"
            href="javascript:void(0);"
            click.delegate="navigateToChildRoute(item.route)"
            >
            ${ item.title }
          </a>
        </li>
        <!-- End of Navbar elements -->
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li class="nav-item dropdown">
          <a
            class="navbar-brand dropdown-toggle"
            href="javascript:void(0);"
            id="navbarDropdown"
            role="button"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
          >
            Workspaces
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <workspace-menu></workspace-menu>
          </div>
        </li>
      </ul>
      <li class="nav navbar-nav navbar-right">
        <a class="router-link nav-link navbar-right">
          Messages
        </a>
      </li>
      <li if.bind="!state.userLoginId" class="nav navbar-nav navbar-right">
        <a
          class="router-link nav-link navbar-right"
          click.delegate="navigateTo('/')"
        >
          Log in
        </a>
      </li>
      <li
        if.bind="state.userLoginId"
        class="router-link nav navbar-nav navbar-right"
        click.delegate="logOut()"
      >
        <a class="router-link nav-link navbar-right">
          Log out
        </a>
      </li>
    </div>
  </nav>
</template>
